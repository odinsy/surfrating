<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Рейтинг серфингистов</title>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <el-container>
            <el-header class="header">
                <h1>Рейтинг серфингистов</h1>
                <div class="controls">
                    <el-select v-model="selectedDiscipline" placeholder="Дисциплина">
                        <el-option
                            v-for="item in disciplines"
                            :key="item.value"
                            :label="item.label"
                            :value="item.value">
                        </el-option>
                    </el-select>

                    <el-select v-model="selectedRegion" placeholder="Регион">
                        <el-option
                            v-for="item in regions"
                            :key="item.value"
                            :label="item.label"
                            :value="item.value">
                        </el-option>
                    </el-select>

                    <el-radio-group v-model="selectedGender">
                        <el-radio label="men">Мужчины</el-radio>
                        <el-radio label="women">Женщины</el-radio>
                    </el-radio-group>
                </div>
            </el-header>

            <el-main>
                <el-tabs v-model="activeTab">
                    <el-tab-pane label="Годовой рейтинг" name="year">
                        <div class="year-selector">
                            <el-select v-model="selectedYear" placeholder="Выберите год">
                                <el-option
                                    v-for="year in availableYears"
                                    :key="year"
                                    :label="year"
                                    :value="year">
                                </el-option>
                            </el-select>
                        </div>

                        <el-table :data="currentYearData" stripe>
                            <el-table-column prop="rank" label="Место" width="100"></el-table-column>
                            <el-table-column prop="name" label="Имя"></el-table-column>
                            <el-table-column prop="year_points" label="Очки за год" width="120"></el-table-column>
                            <el-table-column prop="total_points" label="Всего очков" width="120"></el-table-column>
                            <el-table-column label="Соревнования">
                                <template #default="scope">
                                    <el-popover
                                        placement="right"
                                        width="300"
                                        trigger="click">
                                        <template #reference>
                                            <el-button>Показать ({{ scope.row.events.length }})</el-button>
                                        </template>
                                        <div v-for="event in scope.row.events" :key="event.name">
                                            <p><strong>{{ event.name }}</strong></p>
                                            <p>Место: {{ event.place }}, Очки: {{ event.points }}</p>
                                        </div>
                                    </el-popover>
                                </template>
                            </el-table-column>
                        </el-table>
                    </el-tab-pane>

                    <el-tab-pane label="Общий рейтинг" name="overall">
                        <el-table :data="overallRanking" stripe>
                            <el-table-column prop="rank" label="Место" width="100"></el-table-column>
                            <el-table-column prop="name" label="Имя"></el-table-column>
                            <el-table-column prop="region" label="Регион"></el-table-column>
                            <el-table-column prop="sport_rank" label="Разряд" width="120"></el-table-column>
                            <el-table-column prop="total_points" label="Всего очков" width="120"></el-table-column>
                            <el-table-column label="Лучший результат">
                                <template #default="scope">
                                    {{ scope.row.best_result.event }} ({{ scope.row.best_result.place }} место)
                                </template>
                            </el-table-column>
                        </el-table>
                    </el-tab-pane>
                </el-tabs>
            </el-main>
        </el-container>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>
    <script src="app.js"></script>
</body>
</html>
